#!/usr/bin/env ruby

# @raycast.schemaVersion 1
# @raycast.title Log
# @raycast.mode fullOutput
# @raycast.packageName georgebrock
#
# @raycast.icon ğŸªµ
#
# Documentation:
# @raycast.description Start daily work log
# @raycast.author georgebrock
# @raycast.authorURL https://georgebrock.com

require "date"
require "erb"

START_WEEK = Date.new(2021, 6, 14)
TODAY = Date.today

markdown = ERB.new(DATA.read).result_with_hash(
  week_no: ((TODAY - START_WEEK) / 7).to_i,
  day_no: TODAY.wday,
)

system("dayone2", "new", "-j", "Work Log", markdown)
system("open", "-a", "Day One")

__END__
# Week <%= week_no %>, day <%= day_no %>

- â° Morning routine
  - [ ] ğŸ“Š Check in on SLOs
  - [ ] ğŸ“ Update the plan
  - [ ] ğŸš¨Urgent morning tasks from yesterday
  - [ ] ğŸ’¬ Read Slack
  - [ ] ğŸ“† Check calendar
  - [ ] ğŸ“¥ Process inbox
  - ğŸ•° Total time: â€¦
- â€¦

---

## The Plan
